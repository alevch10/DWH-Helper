# –û–ø–∏—Å–∞–Ω–∏–µ 
–ú–æ–¥—É–ª—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API –≤–Ω–µ—à–Ω–µ–π —Å–∏—Å—Ç–µ–º—ã –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö Amplitude . 

# –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- –ú–æ–¥—É–ª—å –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Å–≤–æ–π —Ñ–∞–π–ª API, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å–µ –∏–º–µ—é—â–∏–µ—Å—è –∑–∞–ø—Ä–æ—Å—ã –≤ AppMetrica. 
- –ú–æ–¥—É–ª—å –¥–æ–ª–∂–µ–Ω –¥–µ–ª–∞—Ç—å API –∑–∞–ø—Ä–æ—Å—ã –≤ —Å–µ—Ä–≤–∏—Å Amplitude –∏—Å–ø–æ–ª—å–∑—É—è —Ç–æ–∫–µ–Ω –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- –°–µ—Ä–≤–∏—Å –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å 2 —Ä–∞–∑–Ω—ã—Ö –ø–∞—Ä—ã secret_key –∏ client_id: 
-- –î–ª—è –ø–æ–¥–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö —Å Web
-- –î–ª—è –ø–æ–¥–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö —Å Mobile 
- API –∑–∞–ø—Ä–æ—Å –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å –æ—Ç–∫—É–¥–∞ –∑–∞–≥—Ä—É–∂–∞—Ç—å: —Å Web –∏–ª–∏ c Mobile

# –û–ø–∏—Å–∞–Ω–∏–µ API
## –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Basic Authorization'

## –ó–∞–ø—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö –æ —Å–æ–±—ã—Ç–∏–∏
### –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞:
–î–∞–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å –¥–µ–ª–∞–µ—Ç –∏–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ Amplitude. –§–∞–π–ª –æ—Ç–¥–∞–µ—Ç .zip –∞—Ä—Ö–∏–≤, –≤–Ω—É—Ç—Ä–∏ –ª–µ–∂–∞—Ç –¥—Ä—É–≥–∏–µ .gz –∞—Ä—Ö–∏–≤—ã –ø–æ –∞—Ä—Ö–∏–≤—É –Ω–∞ –∫–∞–∂–¥—ã–π —á–∞—Å –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ  
```
curl --location 'https://amplitude.com/api/2/export?start=20200201T05&end=20200303T05' \
--header 'Authorization: Basic {key}'
```
–ø—Ä–∏–º–µ—Ä —Å–∫—Ä–∏–ø—Ç–∞ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ñ–∞–π–ª–æ–≤:
``` python
    with zipfile.ZipFile(io.BytesIO(zip_content)) as zip_ref:
        gz_files = [name for name in zip_ref.namelist() if name.endswith(".gz")]
        logger.debug(f"üìÅ –ù–∞–π–¥–µ–Ω—ã —Ñ–∞–π–ª—ã –≤ GZ: {gz_files}")
        
        if not gz_files:
            raise ValueError("–ù–µ—Ç .gz —Ñ–∞–π–ª–æ–≤ –≤ zip")

        all_lines = []
        for gz_name in gz_files:
            logger.debug(f"üîì –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ —Ñ–∞–π–ª–∞: {gz_name}")
            with zip_ref.open(gz_name) as gz_file:
                gz_content = gz_file.read()
                json_content = gzip.decompress(gz_content)
                lines = json_content.decode("utf-8").splitlines()
                all_lines.extend(lines)
                logger.debug(f"‚úÖ –†–∞—Å–ø–∞–∫–æ–≤–∞–Ω {gz_name}: {len(lines)} —Å—Ç—Ä–æ–∫")

    logger.info(f"‚úÖ –î–µ–Ω—å {day} —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω, —Å–æ–±—ã—Ç–∏–π: {len(all_lines)}")
    return all_lines
```

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∑–∞–ø—Ä–æ—Å—É
- –î–ª—è –∑–∞–ø—Ä–æ—Å–∞ –≤—ã—à–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–≤–æ–π GET –∑–∞–ø—Ä–æ—Å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏, —á—Ç–æ–±—ã —è –º–æ–≥ –≤—ã–∑—ã–≤–∞—Ç—å –µ–≥–æ —Å –Ω—É–∂–Ω—ã–º–∏ –º–Ω–µ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏. 
–û–±—Ä–∞—Ç–∏ –≤–Ω–∏–º–∞–Ω–∏–µ, –≤ –∑–∞–ø—Ä–æ—Å–µ –µ—Å—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: 
-- start=20200201T05 - –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–¥–µ–ª–∞—Ç—å —É–¥–æ–±–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –≤–≤–æ–¥–∞ –¥–∞—Ç—ã –≤ swagger –∏ —É–∫–∞–∑–∞—Ç—å –ø—Ä–∏–º–µ—Ä –¥–∞—Ç—ã. —á–∞—Å—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫–∞–∫ 00
-- end=20200303T05 - –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–¥–µ–ª–∞—Ç—å —É–¥–æ–±–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –≤–≤–æ–¥–∞ –¥–∞—Ç—ã –≤ swagger –∏ —É–∫–∞–∑–∞—Ç—å –ø—Ä–∏–º–µ—Ä –¥–∞—Ç—ã. —á–∞—Å—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫–∞–∫ 23
- token - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ settings.
- –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å –≤—ã–±—Ä–∞—Ç—å –∏–∑ –∫–∞–∫–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∑–∞–≥—Ä—É–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ - web –∏–ª–∏ mobile

### –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞
.zip —Ñ–∞–π–ª / –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ –¥–æ 24 .gz —Ñ–∞–π–ª–æ–≤ / –≤–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–≥–æ –∏–∑ –Ω–∏—Ö .json —Ñ–∞–π–ª / –≤–Ω—É—Ç—Ä–∏ .json —Ñ–∞–π–ª –ø–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é .ndjson, —Ç–æ –µ—Å—Ç—å –∫–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª 

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞
1) –°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª
2) —Ä–∞–∑–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—É—é –ø–∞–ø–∫—É
3) —Ä–∞–∑–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –∏–∑ —Ñ–∞–π–ª–æ–≤ –≤–Ω—É—Ç—Ä–∏ –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—É—é –ø–∞–ø–∫—É
4) —Å–∫–ª–µ–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤—Å–µ—Ö .json –≤ –µ–¥–∏–Ω—ã–π —Ñ–∞–π–ª. –û–¥–∏–Ω .json —Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–µ –±–æ–ª–µ–µ —á–µ–º –∑–∞ –æ–¥–Ω—É –Ω–µ–¥–µ–ª—é. –ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞: {–≥–æ–¥}_week_{–Ω–æ–º–µ—Ä –Ω–µ–¥–µ–ª–∏ –≤ –≥–æ–¥—É}.json
5) –∑–∞–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª –≤ .zip, –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ —Ç–∞–∫–æ–µ –∂–µ {–≥–æ–¥}_week_{–Ω–æ–º–µ—Ä –Ω–µ–¥–µ–ª–∏ –≤ –≥–æ–¥—É}.json
6) –æ—Ç–¥–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –µ–≥–æ —Å–∫–∞—á–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é 